language: scala

env:
  global:
    # Surge (token, login)
    - secure: "el3sbtuJrgt+tFYkWKfoNCZpRS2kI02VM4+s1noSDouMQc6SiXnaV93ITHCiXR7aKU9rY6KUfmXCFkxRyQMzfJJoT2blWR7erFv9JfKi5mS4UqLjCf/BKBqqLPiZD6mbgrdOVV2/AAEhtHSn77pVFsj5m6jCQILGdLAvMRFxD2bakcz9WOwCXaOQ5G5WPdN+36x40Du6Rh+b/31xsvtVtlA9xz9PEhHTjqrrz4mhtWLZDjU5jDCowVFCdylDoYrZFzekkaB4rXdQYi6BS/NO7l8d3QNtQfCP1hAQVOWeH4/+BNkpFI3NnIf+l0mjsWJ6bkPp0EW/nPutTvKRiekR/9bq8fLqXxh9irAUuOVPbMTKd0G+hvdDCr3y3aQ9sQglH0OUhod71F5KZ5I7uRQAiozquzuvELB55DUbQiCySyJ2oD8Ri/ZRkVHAQ4OAcv5uUwGZvzopGwzt1yLgiacFRjSwHdAHp9aTFPSSGQNg0Yd7vVKgMLVr3Da7DxR7uD11j1k/H90UAtKWDpXkaQDoSHip/YuC0mCL8LtpUrJklZLyTeUTWq/MnIl8zDON+pmIRyMJp4LpJUWcPyXw01vWaB1nuIhJOTOevGqVfmUDKSF2uzcZ+CXoVH7LrLDYwFchau3O7ceOzzpNj8FzMUUgfYnNwVv6spMJLSiya19qzII="
    - secure: "WwYUm0Oxwv023x3UOCBBlGtvFwb9zQdm9PjjtmaqyzxlY8T3iljrOg3MZPe1iyM+0R4d4/xtx8emZiJ5/sng1HqvoYQ7AgFqAYpEWMP633qV8xVfLDAeTKSYlFsd8mY5ORRsvXplme2OSVjWWIsmzY3dtK2HwhrhYy0f+h70BRMln4EvWFPVlFiUIZvK0UCWEoRc2gBsy728p3HGQ9WejqRWCfZTDwCHEzkjincItePhwyZKaj8TaxJhN3KV6uPjPabKfeyClKcekobW4SfUSDiZAZOuPZyUU1yAl3Z8tqcyzj4MAWqwJE7MSkgJ2pAZl84Ks4Omxo3rcrO8k4pT1FCdlO6zH3UC9sDCN/Sw5+bfYDNKLIR+xn+WKxyHwpH0yfYuALQuTC2rZ2l05scJ+kTLb+fbz2xVaTS8NlqeHo3qA0NrBmEU0u4SQlRLWGwJG7V+f7AHwv4SBE4rW9JBC71sl4rjKtwdG8TeBUjtv8qMTfZ9xTiRWurwI6U9188nfnZ6V2DH5+lcrLq7OeDj5LvjO1Vv61C/SsNVuX0WJ4NMvhICMGNHnZdZ8by878igf7Bs2yAS+pWfMd8zxW040LTwC+ZsLLlcxRumtt29oX150PPhPSBMGU2FIEI1RIpQJPKkOW25G5cbRxA3j21xzyxcxkiLmz4xwXhX/sdNOnA="
    - RELEASE_SCALA_VERSION=2.12.2

scala:
   - 2.11.8
   - ${RELEASE_SCALA_VERSION}

script:
   - 'if [ "$TRAVIS_PULL_REQUEST" = "false" ] && [ "$TRAVIS_REPO_SLUG" = "scafi/scafi" ]; then bash travis_build.sh; else bash travis_build_pullrequest.sh; fi'

before_deploy:
  - echo Preparing for deploy

deploy:
  - provider: releases
    api_key:
      secure: POLoNhB5BpUIXXdZeM9d46KYASzFl+RhWX7aSESqtSRI58GfqzSpLYDjN5gv6j11n1qLppZwklbYff790HGlSypxT+Z/l0Dom/GH+Qj2ucn3DX38tbP2Y6mb7FYXRs1vIYq9Cdo5CaU6X68VV+y35DzVovcW33N9YyQZgrBY1SNQaN6rwkk2OTLeGqDQe3LFKYj/+HSCHvTVi//xF+XPKYJ6U+vX9jE+5CwGNoaGkFfLDfHzQKqtuTujUjDyzjTH1dvIni/nxswc26/q/SBtNmXjnotPX5NtfP2vFA0RZI9gf3sDKmNc8aCvfHu5+/gwe/Hxaz2o+AuZycQoEgtN87Y/4HShJc4iC7+oV/gam6kDpJQI0yNqGuZYo6w9PUOPG10tMfdZRzsNxdvq9tiksULAh8SyE1fD4iQr1dsQ2RA8cA5e2VGgm4n72lvrVIBPqP0AW9jX6TcZGDOSTuZYfVNwr+ewLJ0Mvw7lFzb+u4PTNZM8r8vjVv5SLKjGQv/6AfrOOvouBzYFoA4jtKN1RYgeJDUVvkdwGj8XOId/pTG1jGa9Loy2bIeYCGSEd3cUYOh6DkAxCN9PRnd5mLJaI58cYZD3Nep9OIaQhvi0Vy3aPBkhOfJVHDDRwvyYfFwKcKiEEoCXu+b38ugtskYhd5yc29p/y+/BsFcaC9x1R6M=
    file_glob: true
    file: ./core/target/scala-*/scafi-core-assembly-*.jar
    skip_cleanup: true
    on:
      branch: master
      tags: true
  - provider: surge
    project: ./target/scala-2.12/unidoc/
    domain: scafi-docs.surge.sh
    skip_cleanup: true
    on:
      branch: master
      tags: true
      condition: $TRAVIS_SCALA_VERSION = ${RELEASE_SCALA_VERSION}
  - provider: surge
    project: ./target/scala-2.12/unidoc/
    domain: scafi-docs-unstable.surge.sh
    skip_cleanup: true
    on:
      # branch: develop
      all_branches: true
      condition: $TRAVIS_SCALA_VERSION = ${RELEASE_SCALA_VERSION}
